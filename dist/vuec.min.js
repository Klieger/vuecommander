!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Vuec=t()}(this,function(){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var e=function(){function i(){s(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.fields=t}return t(i,[{key:"implementedBy",value:function(t){this.fields.forEach(function(e){if(!t[e])throw new Error("Class ".concat(t.constructor.name,' does not implement method "').concat(e,'"'))})}}]),i}(),n=function(){function e(){s(this,e),this.history=[]}return t(e,[{key:"clear",value:function(){this.history=[]}},{key:"push",value:function(e){return this.history.push(e)}},{key:"pop",value:function(){return this.history.pop()}}]),e}(),r=function(){function e(){s(this,e),this.listeners={}}return t(e,[{key:"subscribe",value:function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"unsubscribe",value:function(e,t){var n=this.listeners[e];if(!n)return-1;var i=n.indexOf(t);return-1<i&&n.splice(i,1),this.listeners[e]=n,i}},{key:"notify",value:function(n,i){var e=this.listeners[n];if(!e)return-1;var s=[];return e.forEach(function(e){var t={eventType:n,data:i};e.update(t),s.push({listener:e,eventType:n,data:i})}),s}}]),e}(),u=new e("update"),o=function(){function n(e,t){s(this,n),this.events=e,this.history=t,this.maps={},u.implementedBy(this)}return t(n,[{key:"update",value:function(e){var t=new this.maps[e.eventType](e);this.history&&(t.saveState(),this.history.push(t)),t.execute()}},{key:"undo",value:function(){this.history&&this.history.pop().undo()}},{key:"mapCommand",value:function(e,t){this.events.subscribe(t,this),this.maps[t]=e}},{key:"unmapCommand",value:function(e,t){this.events.unsubscribe(t,this),delete this.maps[t]}}]),n}();return{IEventListener:u,EventManager:r,HistoryManager:n,Mapper:o,Interface:e}});